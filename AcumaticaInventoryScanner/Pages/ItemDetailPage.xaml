<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AcuPower.AcumaticaInventoryScanner.Pages.ItemDetailPage"
             Title="Item Details"
             BackgroundColor="#1E272E">
    <ScrollView>
        <VerticalStackLayout Spacing="0" Padding="0">
            
            <!-- Header Section -->
            <Grid BackgroundColor="#00838F" Padding="20,25,20,20">
                <VerticalStackLayout Spacing="8">
                    <Label x:Name="IdLabel" FontSize="16" TextColor="#B2EBF2" FontAttributes="Bold"/>
                    <Label x:Name="DescLabel" FontSize="22" FontAttributes="Bold" TextColor="White" LineBreakMode="WordWrap"/>
                    <HorizontalStackLayout Spacing="15" Margin="0,5,0,0">
                        <Border Stroke="#4DD0E1" StrokeThickness="1" Padding="8,4" BackgroundColor="#006064" StrokeShape="RoundRectangle 8">
                            <Label x:Name="TypeLabel" FontSize="12" TextColor="White"/>
                        </Border>
                        <Border Stroke="#4DD0E1" StrokeThickness="1" Padding="8,4" BackgroundColor="#006064" StrokeShape="RoundRectangle 8">
                            <Label x:Name="StatusBadgeLabel" FontSize="12" TextColor="White"/>
                        </Border>
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Grid>
            
            <!-- Price Summary -->
            <Grid Padding="15" BackgroundColor="#2C3E50">
                <Border Stroke="#37474F" StrokeThickness="1" Padding="15" BackgroundColor="#263238" StrokeShape="RoundRectangle 10">
                    <Grid ColumnDefinitions="*,Auto">
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Default Price" FontSize="12" TextColor="#78909C"/>
                            <Label x:Name="PriceLabel" FontSize="28" FontAttributes="Bold" TextColor="#4DD0E1"/>
                        </VerticalStackLayout>
                        <VerticalStackLayout Grid.Column="1" Spacing="5" HorizontalOptions="End">
                            <Label Text="Base Unit" FontSize="12" TextColor="#78909C" HorizontalTextAlignment="End"/>
                            <Label x:Name="BaseUnitHeaderLabel" FontSize="18" FontAttributes="Bold" TextColor="White" HorizontalTextAlignment="End"/>
                        </VerticalStackLayout>
                    </Grid>
                </Border>
            </Grid>
            
            <!-- Warehouse Stock Section -->
            <VerticalStackLayout Padding="15,10,15,0" Spacing="0" BackgroundColor="#1E272E">
                <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,10">
                    <Label Text="Stock by Warehouse" FontSize="16" FontAttributes="Bold" TextColor="#4DD0E1"/>
                    <Label x:Name="TotalStockLabel" Grid.Column="1" FontSize="14" TextColor="#78909C"/>
                </Grid>
                
                <!-- Warehouse list will be populated dynamically -->
                <VerticalStackLayout x:Name="WarehouseListContainer" Spacing="1">
                    <!-- Placeholder for no warehouse data -->
                    <Border x:Name="NoWarehouseDataPlaceholder" 
                            Stroke="#37474F" StrokeThickness="1" 
                            Padding="20" BackgroundColor="#263238" 
                            StrokeShape="RoundRectangle 8"
                            IsVisible="True">
                        <VerticalStackLayout Spacing="5" HorizontalOptions="Center">
                            <Label Text="ðŸ“¦" FontSize="32" HorizontalOptions="Center"/>
                            <Label Text="No warehouse data available" 
                                   FontSize="14" TextColor="#78909C" 
                                   HorizontalTextAlignment="Center"/>
                            <Label Text="Total Qty on Hand shown below" 
                                   FontSize="12" TextColor="#546E7A" 
                                   HorizontalTextAlignment="Center"/>
                        </VerticalStackLayout>
                    </Border>
                </VerticalStackLayout>
                
                <!-- Fallback: Total Qty On Hand if no warehouse breakdown -->
                <Border x:Name="TotalQtyContainer" 
                        Stroke="#37474F" StrokeThickness="1" 
                        Padding="15" BackgroundColor="#263238" 
                        StrokeShape="RoundRectangle 8"
                        Margin="0,10,0,0"
                        IsVisible="True">
                    <Grid ColumnDefinitions="*,Auto">
                        <VerticalStackLayout>
                            <Label Text="Total Qty On Hand" FontSize="14" TextColor="#78909C"/>
                            <Label Text="(All Warehouses)" FontSize="11" TextColor="#546E7A"/>
                        </VerticalStackLayout>
                        <HorizontalStackLayout Grid.Column="1" Spacing="5" VerticalOptions="Center">
                            <Label x:Name="TotalQtyLabel" FontSize="24" FontAttributes="Bold" TextColor="#4DD0E1"/>
                            <Label x:Name="UnitLabel" FontSize="14" TextColor="#78909C" VerticalOptions="End" Margin="0,0,0,3"/>
                        </HorizontalStackLayout>
                    </Grid>
                </Border>
            </VerticalStackLayout>
            
            <!-- Item Details Section -->
            <VerticalStackLayout Padding="15" Spacing="0" BackgroundColor="#1E272E">
                <Label Text="Item Information" FontSize="16" FontAttributes="Bold" TextColor="#4DD0E1" Margin="0,10,0,15"/>
                
                <!-- Item Class -->
                <Grid ColumnDefinitions="140,*" Padding="10" BackgroundColor="#263238" Margin="0,0,0,1">
                    <Label Text="Item Class" TextColor="#78909C" VerticalOptions="Center"/>
                    <Label x:Name="ItemClassLabel" Grid.Column="1" TextColor="White" VerticalOptions="Center"/>
                </Grid>
                
                <!-- Posting Class -->
                <Grid ColumnDefinitions="140,*" Padding="10" BackgroundColor="#2C3E50" Margin="0,0,0,1">
                    <Label Text="Posting Class" TextColor="#78909C" VerticalOptions="Center"/>
                    <Label x:Name="PostingClassLabel" Grid.Column="1" TextColor="White" VerticalOptions="Center"/>
                </Grid>
                
                <!-- Tax Category -->
                <Grid ColumnDefinitions="140,*" Padding="10" BackgroundColor="#263238" Margin="0,0,0,1">
                    <Label Text="Tax Category" TextColor="#78909C" VerticalOptions="Center"/>
                    <Label x:Name="TaxCategoryLabel" Grid.Column="1" TextColor="White" VerticalOptions="Center"/>
                </Grid>
                
                <!-- Default Warehouse -->
                <Grid ColumnDefinitions="140,*" Padding="10" BackgroundColor="#2C3E50" Margin="0,0,0,1">
                    <Label Text="Default Warehouse" TextColor="#78909C" VerticalOptions="Center"/>
                    <Label x:Name="WarehouseLabel" Grid.Column="1" TextColor="White" VerticalOptions="Center"/>
                </Grid>
                
                <!-- Base Unit -->
                <Grid ColumnDefinitions="140,*" Padding="10" BackgroundColor="#263238" Margin="0,0,0,1">
                    <Label Text="Base Unit" TextColor="#78909C" VerticalOptions="Center"/>
                    <Label x:Name="BaseUnitLabel" Grid.Column="1" TextColor="White" VerticalOptions="Center"/>
                </Grid>
                
                <!-- Planning Method -->
                <Grid ColumnDefinitions="140,*" Padding="10" BackgroundColor="#2C3E50" Margin="0,0,0,1">
                    <Label Text="Planning Method" TextColor="#78909C" VerticalOptions="Center"/>
                    <Label x:Name="PlanningMethodLabel" Grid.Column="1" TextColor="White" VerticalOptions="Center"/>
                </Grid>
                
                <!-- Valuation Method -->
                <Grid ColumnDefinitions="140,*" Padding="10" BackgroundColor="#263238" Margin="0,0,0,1">
                    <Label Text="Val. Method" TextColor="#78909C" VerticalOptions="Center"/>
                    <Label x:Name="ValMethodLabel" Grid.Column="1" TextColor="White" VerticalOptions="Center"/>
                </Grid>
                
                <!-- Lot/Serial Class -->
                <Grid ColumnDefinitions="140,*" Padding="10" BackgroundColor="#2C3E50" Margin="0,0,0,1">
                    <Label Text="Lot/Serial Class" TextColor="#78909C" VerticalOptions="Center"/>
                    <Label x:Name="LotSerialClassLabel" Grid.Column="1" TextColor="White" VerticalOptions="Center"/>
                </Grid>
            </VerticalStackLayout>
            
            <!-- Bottom spacing -->
            <BoxView HeightRequest="20" BackgroundColor="#1E272E"/>
            
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
